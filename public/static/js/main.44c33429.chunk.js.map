{"version":3,"sources":["images/logo.svg","images/union.svg","images/union-error.svg","components/Header.jsx","contexts/CurrentUserContext.jsx","components/Card.jsx","components/Main.jsx","components/Footer.jsx","utils/api.jsx","components/ProtectedRoute.jsx","components/PopupWithForm.jsx","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","components/InfoTooltip.jsx","components/ImagePopup.jsx","components/Register.jsx","components/Login.jsx","utils/auth.jsx","components/App.jsx","serviceWorker.js","index.js"],"names":["module","exports","Header","props","className","src","logo","alt","path","to","exact","email","onClick","onLogOut","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardDelete","onCardLike","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","name","link","onMouseUp","type","aria-label","length","Main","onEditAvatar","onEditProfile","onAddCard","cards","style","backgroundImage","avatar","about","map","key","Footer","api","baseUrl","headers","this","fetch","then","res","ok","json","Promise","reject","status","method","body","JSON","stringify","getHeaders","token","localStorage","getItem","ProtectedRoute","loggedIn","PopupWithForm","title","isOpen","onClose","onSubmit","children","buttonText","action","noValidate","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","handleChange","e","target","value","useEffect","preventDefault","onChange","placeholder","autoComplete","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","current","ref","defaultValue","AddPlacePopup","form","setForm","input","inputMode","InfoTooltip","isSuccess","Regsucs","Regerr","ImagePopup","Register","password","data","setData","prevData","onRegister","id","defaultProps","Login","onLogin","BASE_URL","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isImgPopupOpen","setImgPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isInfoTooltipOpen","setInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setIsSuccess","setEmail","history","useHistory","closeAllPopups","tokenCheck","jwt","push","catch","err","console","log","all","getUserData","getInitialItems","userInfo","document","contains","querySelector","handleESCclose","evt","addEventListener","removeEventListener","currentTarget","Provider","removeItem","changeLikeCardStatus","newCard","newCards","c","deleteItem","filter","item","auth","finally","setItem","patchUserData","patchUserAvatar","postItem","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.44c33429.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.661315c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/union.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/union-error.4072126c.svg\";","import React from 'react';\nimport logo from '../images/logo.svg';\nimport { Link, Route } from 'react-router-dom';\n\nfunction Header(props) {\n  return (\n      <header className='header'>\n        <img className='header__logo hover-style'\n          src={logo} alt='логотип Mesto Russia' />\n        <nav className='header__burger'>\n\n          <Route path=\"/sign-up\">\n            <Link to=\"./sign-in\" className=\"header__exit hover-style\">\n              Войти\n            </Link>\n          </Route>\n\n          <Route path=\"/sign-in\">\n            <Link to=\"./sign-up\" className=\"header__exit hover-style\">\n              Регистрация\n            </Link>\n          </Route>\n\n          <Route exact path=\"/\">\n            <p className='header__email hover-style'\n            >\n              {props.email}\n            </p>\n            <Link\n            to=\"./sign-in\"\n            className='header__exit header__exit_grey hover-style'\n            onClick={props.onLogOut} >\n              Выйти\n            </Link>\n          </Route>\n        </nav>\n      </header>\n  );\n}\n\nexport default Header;\n\n","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React, { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction Card({ \n  card, \n  onCardClick, \n  onCardDelete, \n  onCardLike \n}) { \n  const currentUser = useContext(CurrentUserContext);\n  const isOwn = card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = (`card__recycle-bin hover-style ${isOwn ? '' : 'card__recycle-bin_hidden'}`);\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = `card__like hover-style ${isLiked && 'card__like_active'}`;\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleDeleteClick () {\n    onCardDelete(card);\n  }\n  \n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  return (\n    <li className='card' >\n      <img className='card__image' alt={`${card.name}`} src={`${card.link}`} onMouseUp={handleClick}/>\n      <button className={cardDeleteButtonClassName} onMouseUp={handleDeleteClick}\n        type='button'\n        aria-label='Удалить' />\n      <h3 className='card__title'>{card.name}</h3>\n      <button className={cardLikeButtonClassName} onMouseUp={handleLikeClick}\n        type='button'\n        aria-label='Лайкнуть' />\n      <p className='card__like-count'>{card.likes.length}</p>\n    </li>\n  );\n}\n\nexport default Card;","import React, { useContext } from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({\n  onEditAvatar,\n  onEditProfile,\n  onAddCard,\n  onCardClick,\n  cards,\n  onCardLike,\n  onCardDelete,\n}) {\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main className='content'>\n      <section className='profile'>\n        <button\n          onMouseUp={() => onEditAvatar()}\n          className='profile__photobtn'\n          type='button'\n          aria-label='Обновить фото профиля'\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\n        >\n          <div className='profile__photobtn-overlay' />\n        </button>\n        <h1 className='profile__name'>{currentUser.name}</h1>\n        <p className='profile__job'>{currentUser.about}</p>\n        <button\n          onMouseUp={() => onEditProfile()}\n          className='profile__edit-button hover-style'\n          type='button'\n          aria-label='Редактировать данные профиля'>\n        </button>\n        <button\n          onMouseUp={() => onAddCard()}\n          className='profile__add-button hover-style'\n          type='button'\n          aria-label='Добавить карточку'>\n        </button>\n      </section>\n      <section className='gallery-cards'>\n        <ul className='gallery'>\n          {cards.map(card => (<Card key={card._id}\n            card={card}\n            onCardClick={onCardClick}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n          />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className='footer'>\n      <p className='footer__copyright'>&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;","class Api {\n  constructor({\n    baseUrl,\n    headers\n  }) {\n    this.baseUrl = baseUrl\n    this.headers = headers\n  }\n\n  //Написать общие функции для Api.js (запрос, обработка ошибок, и.т.д)_common() {  } ??\n\n  getInitialItems() {\n    return fetch(`${this.baseUrl}/cards`, {\n        headers: this.headers\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()//Написать общие функции для Api.js (запрос, обработка ошибок, и.т.д)\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  postItem({name, link}) {\n    return fetch(`${this.baseUrl}/cards`, {\n        method: 'POST',\n        headers: this.headers,\n        body: JSON.stringify({\n          name, link\n        })\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  deleteItem(_id) {\n    return fetch(`${this.baseUrl}/cards/${_id}`, {\n        method: 'DELETE',\n        headers: this.headers\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  patchUserAvatar(avatar) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n        method: 'PATCH',\n        headers: this.headers,\n        body: JSON.stringify(avatar)\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  getUserData() {\n    return fetch(`${this.baseUrl}/users/me`, {\n        headers: this.headers\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  patchUserData({name, about}) {\n    return fetch(`${this.baseUrl}/users/me`, {\n        method: 'PATCH',\n        headers: this.headers,\n        body: JSON.stringify({\n          name,\n          about\n        })\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  putLike(_id) {\n    return fetch(`${this.baseUrl}/cards/likes/${_id}`, {\n        method: 'PUT',\n        headers: this.headers\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  deleteLike(_id) {\n    return fetch(`${this.baseUrl}/cards/likes/${_id}`, {\n        method: 'DELETE',\n        headers: this.headers\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  changeLikeCardStatus(_id, isLiked) {\n    return fetch(`${this.baseUrl}/cards/likes/${_id}`, {\n        method: `${isLiked ? 'PUT' : 'DELETE'}`,\n        headers: this.getHeaders(),\n        body: JSON.stringify({\n          _id\n        })\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка при обращении к серверу: ${res.status}`)\n      })\n  }\n\n  getHeaders() {\n    // const token = getToken();\n    const token = localStorage.getItem('jwt') // тут мы получаем токен из localStorage\n    return {\n      ...this.headers,\n      'Authorization': `Bearer ${token}`,\n    }\n  }\n}\n\nexport const api = new Api({\n  baseUrl: 'http://localhost:3000',\n  headers: {\n    // 'Authorization': `Bearer ${token}`,\n    'Content-Type': 'application/json'\n  }\n}) // anna@ya.ru 111\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ loggedIn, ...props }) => {\n  return loggedIn ? <Route {...props} /> : <Redirect to='/sign-in' />\n}\n\nexport default ProtectedRoute;\n\n//из App удалила из свичей <Route>\n// {loggedIn ? <Redirect to='/' /> : <Redirect to='/sign-in' />}\n// </Route>","import React from 'react';\n\nfunction PopupWithForm({ name, title, isOpen, onClose, onSubmit, children, buttonText }) {\n\n    return (\n      <section className={`popup ${isOpen?'popup_is-opened':''} popup_${name}`}>\n        <form className='popup__form'\n          action='#'\n          noValidate\n          onSubmit={onSubmit}>\n          <button\n            className='popup__close hover-style'\n            type='button'\n            aria-label='Закрыть окно без сохранения'\n            onClick={onClose} />\n          <fieldset className='popup__content'>\n\n            <h3 className='popup__title'>{`${title}`}</h3>\n            {children}\n            <button className='popup__button'\n              type='submit'\n              aria-label='Сохранить изменения'>{buttonText}\n            </button>\n\n          </fieldset>\n\n        </form>\n      </section>\n    )\n}\n\nexport default PopupWithForm;\n\n// Атрибут children можно не указывать в перечислении пропсов, с ним вся работа происходит по умолчанию.\n//Поскольку кнопка сабмита есть у всех форм, её элемент лучше задать в общем для всех форм компоненте PopupWithForm (а не в атрибуте children для него). В компонентах форм для PopupWithForm нужно задать ещё один атрибут для надписи на кнопке, например, для формы профиля этот атрибут будет задан в виде: buttonText=\"Сохранить\", а  в компоненте PopupWithForm buttonText использовать как проп.","import React, { useState, useEffect, useContext } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, buttonText} ) {\n  const currentUser = useContext(CurrentUserContext);\n  // добавьте стейт-переменные name и description и привяжите их к полям ввода, сделав их управляемыми.\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpen]);    // После загрузки текущего пользователя из API его данные будут использованы в управляемых компонентах.// Ирина Мозес: Чтобы значения из currentUser всегда заносились на форму при открытии формы, надо в массив зависимостей добавить зависимость от пропа isOpen. Сейчас хук, который поставляет информацию о пользователе на форму, срабатывает только при изменении currentUser, который указан в зависимостях хука. Но, если, например, удалить всю информацию из полей формы и выйти из неё  по Esc, при следующем входе форма откроется с пустыми полями, потому что useEffect не сработает, так как currentUser не был изменён (не было сабмита). -- ВИЖУ КАК СКИДЫВАЮТСЯ ИНПУТЫ К КОНТЕКСТУ ПРИ ЗАКРЫТИИ\n\n\n  //Также лучше не использовать условие при определении значения атрибута name для e.target, так как полей может быть больше двух. Лучше применить подход к формам с несколькими полями ввода, который предложен в документации https://ru.reactjs.org/docs/forms.html#handling-multiple-inputs   // Т.е. данные всех полей лучше хранить в одном стейте, в каком-то объекте , а запись в него производить в функции handleChange по имени поля ввода:\n  // const target = event.target;\n  // const value = target.value;\n  // const name = target.name;\n  // setValues({...values, { [name]: value }});\n\n  function handleChange(e) {\n    e.target.name === 'nameInput'\n      ? setName(e.target.value)\n      : setDescription(e.target.value);\n  }\n  // setValue(e.target.value);\n  // const [values, setValues] = useState({\n  //   name: currentUser.name,\n  //   description: currentUser.about\n  // });\n\n  // function handleChange(event) {\n  // const target = event.target;\n  // const value = target.value;\n  // const name = target.name;\n  // setValues( {...values, [name]: value });\n  // }\n\n  function handleSubmit(e) { // Передаём значения управляемых компонентов во внешний обработчик\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name='profile-edit'\n      title='Редактировать профиль'\n      buttonText='Сохранить'\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <label className='popup__label'>\n        <input className='popup__input popup__input_name'\n          type='text'\n          name='nameInput'\n          value={name || ''}\n          onChange={handleChange}\n          placeholder='Имя'\n          autoComplete='name'\n          required\n          minLength='2'\n          maxLength='40'\n        />\n        <span className='popup__error' />\n      </label>\n      <label className='popup__label'>\n        <input\n          className='popup__input popup__input_about'\n          type='text'\n          name='aboutInput'\n          value={description || ''}\n          onChange={handleChange}\n          autoComplete='off'\n          placeholder='О себе'\n          required\n          minLength='2'\n          maxLength='200'\n        />\n        <span className='popup__error' />\n      </label>\n\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;","import React, {useRef} from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const inputRef = useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: inputRef.current.value /* Значение инпута, полученное с помощью рефа */\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name='update-avatar'\n      title='Обновить аватар'\n      buttonText='Сохранить'\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <label className='popup__label'>\n        <input\n          className='popup__input popup__input_update-avatar'\n          ref={inputRef}\n          name='linkInput'\n          defaultValue=''\n          placeholder='Ссылка на фото'\n          type='url'\n        />\n        <span className='popup__error'\n        />\n      </label>\n\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;","import React, { useState, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddCard }) {\n\n  const [form, setForm] = useState({\n    name: '',\n    link: ''\n  });\n\n  useEffect(() => {\n  if (isOpen === true) {\n    setForm({\n    name: '',\n    link: ''\n    });\n  }\n  }, [isOpen])\n\n  function handleChange(e) {\n    const input = e.target;\n    setForm({  // Обработчик изменения инпута обновляет стейт\n      ...form,\n      [input.name]: input.value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddCard(form);\n  }\n\n  return (\n    <PopupWithForm\n      name='confirm'\n      title='Новое место'\n      buttonText='Создать'\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <label className='popup__label'>\n        <input className='popup__input popup__input_place-name'\n          type='text'\n          name='name'\n          value={form.name} // Значение элемента «привязывается» к значению стейта\n          onChange={handleChange}\n          autoComplete='off'\n          placeholder='Название'\n          minLength='1'\n          maxLength='30'\n          required />\n        <span className='popup__error' />\n      </label>\n      <label className='popup__label'>\n        <input className='popup__input popup__input_image_url'\n          type='url'\n          inputMode='url'\n          name='link'\n          value={form.link}\n          onChange={handleChange}\n          placeholder='Ссылка на картинку'\n          required />\n        <span className='popup__error' />\n      </label>\n\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup","import React from 'react';\nimport Regsucs from '../images/union.svg';\nimport Regerr from '../images/union-error.svg';\n\nfunction InfoTooltip (props) {\n//\n  return (\n    <section\n        className={`popup ${props.isOpen && \"popup_is-opened\"}`}\n    >\n    <div className=\"popup__form\">\n        <button\n          className='popup__close popup__close_figure hover-style' type='button'\n          onClick={props.onClose}\n        />\n        <img\n          className=\"popup__union\"\n          alt=\"union\"\n          src={`${ props.isSuccess ? Regsucs : Regerr }`}\n        />\n        <p className=\"popup__info\" >\n          { props.isSuccess\n            ? 'Вы успешно зарегистрировались!'\n            : 'Что-то пошло не так! Попробуйте ещё раз.'\n          }\n        </p>\n        </div>\n    </section>\n  )\n}\n\nexport default InfoTooltip;\n","import React from 'react';\n\nfunction ImagePopup({ isOpen, card, onClose }) {\n\n  return (\n    <section className={`popup ${isOpen ? 'popup_is-opened' : ''}`}>\n      <figure className='zoom'>\n        <button className='popup__close popup__close_figure hover-style' type='button'\n          aria-label='Закрыть картинку' onClick={onClose} />\n        <img className='zoom__image' src={`${card.link}`} alt={`${card.name}`} />\n        <figcaption className='zoom__caption'>{`${card.name}`}</figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Register = (props) => {\n  const [data, setData] = useState( {\n    email: '',\n    password: ''\n  });\n\n  function handleChange (e) {\n    const {name, value} = e.target;\n    setData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  }\n\n  function handleSubmit (e) {\n    e.preventDefault();\n    props.onRegister(data.email, data.password);\n    setData({email: '', password: ''});\n  }\n\n  return(\n    <form\n      className=\"authform\"\n      onSubmit={handleSubmit}\n      name=\"register\"\n    >\n    <h1\n      className=\"authform__title\"\n    >Регистрация\n    </h1>\n      <input\n        className=\"authform__input\"\n        id=\"email\"\n        name=\"email\"\n        value={data.email}\n        type=\"email\"\n        placeholder=\"E-mail\"\n        onChange={handleChange}\n        autoComplete=\"on\"\n      />\n      <input\n        className=\"authform__input\"\n        id=\"password\"\n        name=\"password\"\n        value={data.password}\n        type=\"password\"\n        placeholder=\"Пароль\"\n        onChange={handleChange}\n        autoComplete=\"current-password\"\n      />\n        <button\n          type=\"submit\"\n          className=\"authform__button\"\n        >Зарегистрироваться\n        </button>\n    <div className=\"authform__signin\">\n      <p className=\"authform__then-link\">Уже зарегистрированы?</p>\n      <Link to=\"sign-in\" className=\"authform__then-link hover-style\">Войти</Link>\n    </div>\n    </form>\n  )\n}\n\nRegister.defaultProps = {\n  autoComplete: 'on',\n};\n\nexport default Register;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Login = (props) => {\n  const [data, setData] = useState({\n    email: '',\n    password: '',\n  });\n\n  function handleChange (e) {\n    const name = e.target.name;\n    setData({...data, [name]: e.target.value});\n  }\n\n  function handleSubmit (e) {\n    e.preventDefault();\n    props.onLogin(data.email, data.password);\n    setData({email: '', password: ''});\n  }\n\n  return (\n      <form\n        className=\"authform\"\n        onSubmit={handleSubmit}\n        name=\"login\"\n      >\n      <h1\n        className=\"authform__title\"\n      >Вход</h1>\n        <input\n          className=\"authform__input\"\n          placeholder=\"E-mail\"\n          value={data.email}\n          id=\"email\"\n          name=\"email\"\n          type=\"email\"\n          onChange={handleChange}\n          autoComplete=\"on\"\n        />\n        <input\n          className=\"authform__input\"\n          id=\"password\"\n          name=\"password\"\n          type=\"password\"\n          value={data.password}\n          placeholder=\"Пароль\"\n          onChange={handleChange}\n          autoComplete=\"current-password\"\n        />\n        <button\n          type=\"submit\"\n          className=\"authform__button\"\n        >Войти\n        </button>\n      <div className=\"authform__signin\"\n      >\n        <p\n          className=\"authform__then-link\"\n        >Ещё не зарегистрированы?\n        </p>\n        <Link\n          to=\"sign-up\"\n          className=\"authform__then-link hover-style\"\n        >Регистрация\n        </Link>\n      </div>\n      </form>\n  )\n}\n\nLogin.defaultProps = {\n  autoComplete: 'on',\n};\n\nexport default Login;","export const BASE_URL = 'http://localhost:3000';\n// export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email, password})\n  })\n  .then((res) => {\n    if (res.ok) {\n      console.log(`успешная регистрация, статус ${res.status}`)\n      return res.json();\n    }\n    console.log(`к сожалению у вас реджект, ошибка ${res.status}`)\n    return Promise.reject(res.status);\n  })\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email, password})\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res.status);\n  })\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, { //здесь наш токен\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res.status);\n  })\n}\n","import React, { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport { Route, Switch, useHistory } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { api } from \"../utils/api\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport InfoTooltip from './InfoTooltip';\nimport ImagePopup from \"./ImagePopup\";\nimport Register from \"./Register.jsx\";\nimport Login from './Login.jsx';\nimport * as auth from '../utils/auth';\n\nfunction App() {\n\n  // окна\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isImgPopupOpen, setImgPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = useState(false);\n\n  // объекты\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [email, setEmail] = useState(null)\n  const history = useHistory();\n\n// ----------------------------------------------------------------------------------\n\n  useEffect(() => {\n    Promise.all([api.getUserData(), api.getInitialItems()])\n      .then(([userInfo, cards]) => {\n        setCurrentUser(userInfo);\n        setCards(cards);\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (document.contains(document.querySelector('.popup_is-opened'))) {\n      function handleESCclose(evt) {\n        if (evt.key === \"Escape\") {\n          console.log(`нажали`);\n          closeAllPopups();\n        }\n      }\n      document.addEventListener(\"keydown\", handleESCclose);\n      return () => {\n        document.removeEventListener(\"keydown\", handleESCclose);\n      };\n    }\n  });\n\n  useEffect(() => {\n    if (document.contains(document.querySelector('.popup_is-opened'))) {\n      function handleOverlayClose(evt) {\n        if (evt.currentTarget === evt.target) {\n          closeAllPopups();\n        }\n      }\n      document.querySelector('.popup_is-opened').addEventListener('click', handleOverlayClose)\n    }\n  })\n// ----------------------------------------------------------------------------------\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setInfoTooltipOpen(false);\n    setImgPopupOpen(false);\n  }\n  function handleCardClick(card) {\n    setSelectedCard({ ...card});\n    setImgPopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n  function handleUpdateUser({ name, about }) {\n    api\n      .patchUserData({ name, about })\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }\n  function handleUpdateAvatar(avatar) {\n    api\n      .patchUserAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }\n\n  //Cards\n\n  function handleAddPlaceSubmit({ name, link }) {\n    api\n      .postItem({ name, link })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }\n  function handleCardDelete(card) {\n    api\n      .deleteItem(card._id)\n      .then(() => {\n        setCards(cards.filter((item) => item !== card));\n      })\n      .catch((err) => console.log(err));\n  }\n\n  //Auth\n\n  function handleLogin (email, password) {\n    auth.authorize(email, password)\n      .then((res) => {\n        if (res.token) {\n          localStorage.setItem('jwt', res.token)\n          setEmail(email)\n          setIsSuccess(true)\n          setLoggedIn(true)\n          history.push('/')\n        }\n      })\n      .catch((err) => {\n        if (err === 400) {\n          console.log('Не передано одно из полей');\n        } else if (err === 401) {\n          console.log('Неправильные почта или пароль');\n        }\n        console.log('Ошибка логина 172: ' + err);\n        setIsSuccess(false)\n        setLoggedIn(false)\n      })\n      .finally(() =>{\n        setInfoTooltipOpen(true)\n      })\n  }\n\n  function handleRegister(email, password) {\n    auth.register(email, password)\n      .then(() => {\n    console.log(email, password)\n        setIsSuccess(true);\n        history.push('/sign-in');\n      })\n      .catch((err) => {\n        if (err === 400) {\n          console.log('Не передано одно из полей, либо пользователь уже существует');\n        }\n        console.log('Ошибка регистрации 191: ' + err); // при регистрации же не может быть 401 ошибки ?\n        setIsSuccess(false);\n      })\n      .finally(() =>{\n        setInfoTooltipOpen(true)\n      })\n  }\n\n  function handleLogOut () {\n    setEmail(null);\n    setIsSuccess(false)\n    setLoggedIn(false);\n    localStorage.removeItem('jwt');\n    history.push('/sign-in');\n  }\n\n  function tokenCheck() {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            setEmail( res.data.email);\n            history.push('/');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setLoggedIn(false);\n        })\n    }\n  }\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n\n// ----------------------------------------------------------------------------------\n  return (\n    <div className=\"page\">\n  <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__container\">\n        <Header\n          email={email}\n          onLogOut={handleLogOut}\n        />\n\n          <Switch>\n              <ProtectedRoute\n                  exact path={'/'}\n                  loggedIn={loggedIn}\n              >\n                <Main\n                  cards={cards}\n                  onEditAvatar={handleEditAvatarClick}\n                  onEditProfile={handleEditProfileClick}\n                  onAddCard={handleAddPlaceClick}\n                  onCardClick={handleCardClick}\n                  onCardLike={handleCardLike}\n                  onCardDelete={handleCardDelete}\n                  />\n                <Footer />\n              </ProtectedRoute>\n\n              <Route path=\"/sign-up\">\n                <Register\n                onRegister={handleRegister}\n                />\n              </Route>\n\n              <Route path=\"/sign-in\">\n                  <Login\n                  onLogin={handleLogin}\n                  />\n              </Route>\n          </Switch>\n\n              <ImagePopup\n                isOpen={isImgPopupOpen}\n                card={selectedCard}\n                onClose={closeAllPopups}\n              />\n              <EditProfilePopup\n                isOpen={isEditProfilePopupOpen}\n                onClose={closeAllPopups}\n                onUpdateUser={handleUpdateUser}\n              />\n              <EditAvatarPopup\n                isOpen={isEditAvatarPopupOpen}\n                onClose={closeAllPopups}\n                onUpdateAvatar={handleUpdateAvatar}\n              />\n              <InfoTooltip\n                isOpen={isInfoTooltipOpen}\n                onClose={closeAllPopups}\n                isSuccess={isSuccess}\n              />\n              <AddPlacePopup\n                isOpen={isAddPlacePopupOpen}\n                onClose={closeAllPopups}\n                onAddCard={handleAddPlaceSubmit}\n              />\n      </div>\n  </CurrentUserContext.Provider>\n    </div>\n  );\n}\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // 'Content is cached for offline use.' message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { BrowserRouter } from 'react-router-dom'; // импортируем BrowserRouter\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter> \r\n    <App />\r\n    </BrowserRouter> \r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}